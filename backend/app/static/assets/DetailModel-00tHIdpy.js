import{o,c as i,a,i as w,r as v,b as V,w as C,d as ue,e as de,f as D,u as e,g as d,h as F,j as x,k as z,t as s,T as he,l as T,m as Y,v as E,n as ee,p as me,q as P,F as q,s as I,x as pe}from"./index-NwNd68I_.js";function ve(B,R){return o(),i("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[a("path",{"fill-rule":"evenodd",d:"M15 3.75a.75.75 0 0 1 .75-.75h4.5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0V5.56l-3.97 3.97a.75.75 0 1 1-1.06-1.06l3.97-3.97h-2.69a.75.75 0 0 1-.75-.75Zm-12 0A.75.75 0 0 1 3.75 3h4.5a.75.75 0 0 1 0 1.5H5.56l3.97 3.97a.75.75 0 0 1-1.06 1.06L4.5 5.56v2.69a.75.75 0 0 1-1.5 0v-4.5Zm11.47 11.78a.75.75 0 1 1 1.06-1.06l3.97 3.97v-2.69a.75.75 0 0 1 1.5 0v4.5a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1 0-1.5h2.69l-3.97-3.97Zm-4.94-1.06a.75.75 0 0 1 0 1.06L5.56 19.5h2.69a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 1 1.5 0v2.69l3.97-3.97a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})])}const ge=["content"],_e=["content"],fe=a("meta",{name:"keywords",content:"경복궁, 창덕궁, 창경궁, 덕수궁, 종묘, 한국문화, 문화재청, 문화재, 문화, 문화유산, 문화유적, 문화유적지, 투어, 관광정보"},null,-1),be=a("meta",{name:"robots",content:"index, follow"},null,-1),we=["content"],xe=a("meta",{property:"og:type",content:"website"},null,-1),ye=["content"],ke=["content"],je=["content"],Le=["content"],De=a("meta",{property:"twitter:card",content:"summary_large_image"},null,-1),$e=a("meta",{name:"twitter:site",content:"@joseonspace"},null,-1),Me=["content"],Ce=["content"],Fe=["content"],ze=["href"],Te=["href"],qe=["href"],Be=["href"],Se={class:"w-full rounded-box bg-base-100 mt-20 mb-32 h-auto relative mx-auto max-w-3xl"},Ue={class:"sticky top-0 z-10"},Ve={class:"absolute right-4 top-4"},Pe={class:"mb-4"},Ie=["src","alt"],Re={class:"text-4xl md:text-5xl font-bold p-4 md:px-12"},Ne={class:"flex px-4 md:px-12 gap-2 pb-4"},He={key:0,class:"badge badge-primary drop-shadow-sm"},Oe={key:1,class:"badge badge-primary drop-shadow-sm"},Ze={key:2,class:"badge badge-primary drop-shadow-sm"},Ae={key:0,class:"text-2xl md:text-3xl font-bold pt-0 p-4 md:px-12"},Ke={key:1,class:"carousel carousel-end w-full px-2 md:px-10 overflow-x-scroll overflow-y-visible pb-4"},Ge={class:"carousel-item"},Je={class:"card h-96 overflow-hidden bg-base-100 shadow-md rounded-lg max-w-80 w-[70vw] cursor-pointer mx-2"},Qe=["src","alt","onLoad"],We={class:"absolute bottom-0 w-full p-4 bg-base-100/80 backdrop-blur-lg"},Xe={class:"text-lg w-full font-semibold truncate mb-2"},Ye={class:"h-32"},Ee={class:"text-sm w-full ellipsis-multi-6 font-serif font-thin"},et={class:"text-2xl md:text-3xl font-bold p-4 md:px-12"},tt={key:2,class:"px-4 md:px-12"},at={class:"font-serif font-thin leading-7 md:leading-9"},lt={key:3,class:"text-2xl md:text-3xl font-bold p-4 md:px-12"},ot={key:4,class:"carousel carousel-end w-full px-2 md:px-10 overflow-x-scroll overflow-y-visible pb-4"},nt=["id"],st=["src","onLoadedmetadata"],it=["onClick"],ct={class:"absolute bottom-0 w-full p-4 bg-base-100/80 backdrop-blur-md"},rt={class:"text-lg w-full font-semibold truncate"},ut=a("div",{class:"h-10"},null,-1),ht={__name:"DetailModel",props:["building"],emits:["close"],setup(B,{emit:R}){const te=B,h=w("lang"),r=w("selectedPalace"),m=w("buildingSlug"),u=w("langData"),b=w("palaceDict"),y=w("palaceURL"),N=v({thumbnail:!1}),l=v({}),$=v(!1),k=v([]),j=v([]),g=v(""),H={ko:900,en:1200,ja:360,zh:255},O=V(()=>{var t;return((t=l.value.explanation)==null?void 0:t.length)||0}),Z=V(()=>Math.round(O.value/H[h.value])||0),A=V(()=>Math.round(O.value/H[h.value]*60)%60||0),S=v([]),U=v([]),ae=()=>{S.value=[],k.value.forEach(t=>{S.value.push({"@context":"https://schema.org/","@type":"ImageObject",contentUrl:"https://luma.joseon.space/api/v1/media/"+t.media,license:"https://www.kogl.or.kr/info/license.do",acquireLicensePage:"https://www.kogl.or.kr/info/license.do",creditText:"Korea Cultural Heritage Administratio (문화재청)",creator:{"@type":"Organization",name:"문화재청"},copyrightNotice:"문화재청"})})},le=()=>{U.value=[],j.value.forEach(t=>{U.value.push({"@context":"https://schema.org","@type":"VideoObject",name:t.name,description:t.name,contentUrl:"https://luma.joseon.space/api/v1/media/"+t.video,embedUrl:"https://luma.joseon.space/api/v1/media/"+t.video,thumbnailUrl:"https://luma.joseon.space/api/v1/media/"+t.video,uploadDate:"2023-12-31T09:00:00+09:00"})})},K=async t=>{try{const n=await fetch(new URL(t,window.location.origin));if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.json()}catch(n){console.error(`Error fetching data from ${t}:`,n)}},G=async()=>{if(m.value===""){L();return}l.value=await K(window.location.origin+"/api/v1/buildingurl/?language="+h.value+"&building_name="+te.building),await oe(),await ne(),X()},oe=async()=>{var t;(t=l.value.detail_image)!=null&&t.length&&(await J("photo",l.value.detail_image,k),ae())},ne=async()=>{var t;(t=l.value.detail_video)!=null&&t.length&&(await J("video",l.value.detail_video,j),le())},J=async(t,n,p)=>{const _=n.map(f=>K(new URL("api/v1/"+t+"/?language="+h.value+"&"+t+"_id="+f,window.location.origin)));p.value=await Promise.all(_)},se=R,L=()=>{$.value=!1,setTimeout(()=>se("close"),400)},Q=t=>{t.key==="Escape"&&L()},W=()=>{var t;if(!document.fullscreenElement&&g.value){const n=(t=document.getElementById(g.value))==null?void 0:t.querySelector("video");n&&(n.muted=!0),g.value=""}},ie=t=>{var n,p,_,f;(n=t.requestFullscreen)!=null&&n.call(t)||(p=t.mozRequestFullScreen)!=null&&p.call(t)||(_=t.webkitRequestFullscreen)!=null&&_.call(t)||((f=t.msRequestFullscreen)==null||f.call(t))},ce=()=>{document.fullscreenElement&&document.exitFullscreen()};C(g,t=>{var p;const n=(p=document.getElementById(t))==null?void 0:p.querySelector("video");n&&(t&&!document.fullscreenElement?(ie(n),n.muted=!1):(ce(),n.muted=!0))});const X=()=>{let t=" ("+b.value[r.value]+") - "+u.title;document.title=l.value.name+t},re=t=>{g.value===t?g.value="":g.value=t};return ue(()=>{$.value=!0,window.addEventListener("keydown",Q),document.addEventListener("fullscreenchange",W),C([h,m],G),C(r,L),C([l,h,r],X)}),de(()=>{window.removeEventListener("keydown",Q),document.removeEventListener("fullscreenchange",W)}),G(),(t,n)=>{var p,_,f;return o(),i(q,null,[(o(),D(he,{to:"head"},[a("meta",{name:"title",content:l.value.name+" ("+e(b)[e(r)]+") - "+e(u).title},null,8,ge),a("meta",{name:"description",content:(p=l.value.explanation)==null?void 0:p.substring(0,150)},null,8,_e),fe,be,a("meta",{name:"language",content:e(h)},null,8,we),xe,a("meta",{property:"og:url",content:"https://luma.joseon.space/api/v1/buildingurl/"+l.value.url},null,8,ye),a("meta",{property:"og:title",content:l.value.name+" ("+e(b)[e(r)]+") - "+e(u).title},null,8,ke),a("meta",{property:"og:description",content:(_=l.value.explanation)==null?void 0:_.substring(0,150)},null,8,je),a("meta",{property:"og:image",content:"https://luma.joseon.space/api/v1/media/"+l.value.thumbnail},null,8,Le),De,$e,a("meta",{property:"twitter:title",content:l.value.name+" ("+e(b)[e(r)]+") - "+e(u).title},null,8,Me),a("meta",{property:"twitter:description",content:(f=l.value.explanation)==null?void 0:f.substring(0,150)},null,8,Ce),a("meta",{property:"twitter:image",content:"https://luma.joseon.space/api/v1/media/"+l.value.thumbnail},null,8,Fe),e(r)!=="0"&&e(h)!=="ko"&&e(m)!==""?(o(),i("link",{key:0,rel:"alternate",hreflang:"ko",href:`https://luma.joseon.space/${e(y)[e(r)]}/${e(m)}`},null,8,ze)):d("",!0),e(r)!=="0"&&e(h)!=="en"&&e(m)!==""?(o(),i("link",{key:1,rel:"alternate",hreflang:"en",href:`https://luma.joseon.space/${e(y)[e(r)]}/${e(m)}`},null,8,Te)):d("",!0),e(r)!=="0"&&e(h)!=="ja"&&e(m)!==""?(o(),i("link",{key:2,rel:"alternate",hreflang:"ja",href:`https://luma.joseon.space/${e(y)[e(r)]}/${e(m)}`},null,8,qe)):d("",!0),e(r)!=="0"&&e(h)!=="zh"&&e(m)!==""?(o(),i("link",{key:3,rel:"alternate",hreflang:"zh",href:`https://luma.joseon.space/${e(y)[e(r)]}/${e(m)}`},null,8,Be)):d("",!0),(o(),D(F("script"),{type:"application/ld+json"},{default:x(()=>[z(s(S.value),1)]),_:1})),(o(),D(F("script"),{type:"application/ld+json"},{default:x(()=>[z(s(U.value),1)]),_:1})),(o(),D(F("script"),{type:"application/ld+json"},{default:x(()=>[z(' { "@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{ "@type": "ListItem", "position": 1, "name": "Home", "item": "https://luma.joseon.space" },{ "@type": "ListItem", "position": 2, "name": "'+s(e(b)[e(r)])+'", "item": "https://luma.joseon.space/'+s(e(y)[e(r)])+'" },{ "@type": "ListItem", "position": 3, "name": "'+s(B.building)+'" }] } ',1)]),_:1})),(o(),D(F("script"),{type:"application/ld+json"},{default:x(()=>[z(' { "@context": "https://schema.org", "@type": "Article", "headline": "'+s(l.value.name)+" ("+s(e(b)[e(r)])+')", "image": [ "'+s("https://luma.joseon.space/api/v1/media/"+l.value.thumbnail)+'" ], "datePublished": "2023-12-31T09:00:00+09:00", "author": [{ "@type": "Organization", "name": "문화재청", "url": "https://www.cha.go.kr" }] } ',1)]),_:1}))])),T(ee,{name:"opacity"},{default:x(()=>[Y(a("div",{class:"fixed top-0 left-0 w-full h-full z-[2] overflow-y-scroll px-4 backdrop-blur-lg bg-base-100/50",onClick:pe(L,["self"])},[T(ee,{name:"bounce"},{default:x(()=>[Y(a("div",Se,[a("div",Ue,[a("div",Ve,[a("button",{class:"btn btn-circle btn-sm",onClick:L},[T(e(me),{class:"w-5 h-auto"})])])]),a("header",Pe,[a("figure",{class:P(["h-[50vh] overflow-hidden rounded-box rounded-b-none mb-8",{skeleton:!N.value.thumbnail}])},[l.value.thumbnail?(o(),i("img",{key:0,src:"/api/v1/media/"+l.value.thumbnail,alt:l.value.name,class:"w-full h-full object-cover",onLoad:n[0]||(n[0]=c=>N.value.thumbnail=!0)},null,40,Ie)):d("",!0)],2),a("h1",Re,s(l.value.name),1),a("div",Ne,[l.value.explanation?(o(),i("div",He,s(Z.value>0?Z.value+e(u).minute:"")+" "+s(A.value>0?A.value+e(u).second:"")+" "+s(e(u).readingtime),1)):d("",!0),l.value.detail_image&&l.value.detail_image.length>0?(o(),i("div",Oe,s(l.value.detail_image.length)+" "+s(l.value.detail_image.length>1?e(u).photos_plural:e(u).photos),1)):d("",!0),l.value.detail_video&&l.value.detail_video.length>0?(o(),i("div",Ze,s(l.value.detail_video.length)+" "+s(l.value.detail_video.length>1?e(u).videos_plural:e(u).videos),1)):d("",!0)])]),a("main",null,[a("article",null,[k.value.length>0?(o(),i("h2",Ae,s(e(u).quickoverview),1)):d("",!0),k.value.length>0?(o(),i("div",Ke,[(o(!0),i(q,null,I(k.value,c=>(o(),i("div",Ge,[a("section",Je,[a("div",{class:P([{skeleton:!c.imageLoaded},"w-full h-2/3"])},[a("img",{src:"/api/v1/media/"+c.media,alt:c.name+`
`+c.explanation,loading:"lazy",class:"w-full h-full object-cover",onLoad:M=>c.imageLoaded=!0},null,40,Qe)],2),a("div",We,[a("h3",Xe,s(c.name),1),a("div",Ye,[a("p",Ee,s(c.explanation),1)])])])]))),256))])):d("",!0),a("h2",et,s(e(u).detail),1),l.value.explanation?(o(),i("div",tt,[(o(!0),i(q,null,I(l.value.explanation.split(`
`),c=>(o(),i("p",at,s(c),1))),256))])):d("",!0),j.value.length>0?(o(),i("h2",lt,s(e(u).multimedia),1)):d("",!0),j.value.length>0?(o(),i("div",ot,[(o(!0),i(q,null,I(j.value,c=>(o(),i("div",{class:"carousel-item",key:c.video,id:c.video},[a("section",{onMouseover:n[1]||(n[1]=M=>t.hover=!0),onMouseleave:n[2]||(n[2]=M=>t.hover=!1),class:"card h-72 overflow-hidden bg-base-100 shadow-md rounded-lg max-w-96 w-[80vw] cursor-pointer mx-2 relative"},[a("div",{class:P([{skeleton:!c.Loaded},"w-full h-full rounded-box rounded-b-none mb-4 relative"])},[a("video",{src:"/api/v1/media/"+c.video,muted:"",autoplay:"",loop:"",playsinline:"",preload:"auto",class:"w-full h-7/8 object-cover",onLoadedmetadata:M=>c.Loaded=!0,ref_for:!0,ref:"videoPlayer"},null,40,st),a("button",{onClick:M=>re(c.video),class:"absolute top-0 right-0 m-2 btn btn-circle btn-sm"},[T(e(ve),{class:"w-5 h-auto"})],8,it)],2),a("div",ct,[a("h3",rt,s(c.name),1)])],32)],8,nt))),128))])):d("",!0)])]),ut],512),[[E,$.value]])]),_:1})],512),[[E,$.value]])]),_:1})],64)}}};export{ht as default};
